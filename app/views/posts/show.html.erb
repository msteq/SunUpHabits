<div class="min-h-screen bg-[#f8f2ec] p-8">
  <div class="max-w-3xl mx-auto">
    <!-- タイトル -->
    <h2 class="text-2xl font-bold text-black mb-6 text-center">投稿の詳細</h2>

    <!-- 投稿詳細カード -->
    <div class="bg-white p-6 rounded shadow-lg mb-6">
      <div class="flex mb-2">
        <!-- プロフィールアイコン -->
        <div class="rounded-full bg-gray-300 w-12 h-12 mr-3 flex items-center justify-center">
          <img src="<%= asset_path('default_icon.png') %>" alt="プロフィール画像" class="rounded-full w-12 h-12">
        </div>

        <!-- ユーザー名と投稿内容 -->
        <div class="flex flex-col space-y-1 mb-2">
          <span class="text-lg font-bold text-black pl-2"><%= @user.name %></span>
          <p class="text-base leading-6 text-gray-700"><%= @post.content.gsub("\n", "<br>").html_safe %></p>
        </div>
      </div>

      <!-- 進捗状況 -->
      <div class="mb-6">
        <div class="flex justify-between items-center mb-2">
          <p class="text-sm text-gray-500">短期目標: 30日</p>
          <p class="text-sm text-[#FFA500]"><%= @progress_rate %>%</p>
        </div>
        <div class="bg-gray-300 h-4 rounded">
          <div class="bg-[#FFA500] h-4 rounded" style="width: <%= @progress_rate %>%;"></div>
        </div>
      </div>

      <!-- コメントと「いいね」情報 -->
      <div class="flex justify-between items-center">
        <!-- コメント情報 -->
        <div class="flex items-center space-x-4">
          <span class="text-sm text-black flex items-center">
            <span class="fa-regular fa-comment text-gray-700 mr-1"></span>
            コメント
          </span>
          <span class="text-sm text-black flex items-center">
            <span class="fa-regular fa-heart text-gray-700 mr-1"></span>
            いいね
          </span>
        </div>

        <!-- 作成日時 -->
        <span class="text-xs text-gray-500">
          投稿日時: <%= @post.created_at.strftime('%Y年%m月%d日 %H時%M分') %>
        </span>
      </div>
    </div>

    <!-- コメントリスト -->
    <div class="mb-6">
      <h3 class="text-lg font-semibold text-black mb-2">コメント</h3>
      <% if @comments.any? %>
      <% @comments.each do |comment| %>
      <div class="mb-4">
        <div class="flex">
          <!-- 左側：ユーザー名とアイコン -->
          <div class="flex flex-col items-center mr-3">
            <!-- ユーザー名 -->
            <span class="text-sm font-bold text-black mb-1"><%= comment[:user_name] %></span>
            <!-- プロフィールアイコン -->
            <div class="rounded-full bg-gray-300 w-8 h-8 flex items-center justify-center">
              <img src="<%= asset_path('default_icon.png') %>" alt="コメント投稿者" class="rounded-full w-8 h-8">
            </div>
          </div>

          <!-- 右側：投稿日とコメント内容 -->
          <div class="pt-2">
            <!-- 投稿日 -->
            <span class="text-xs text-gray-500 block"><%= comment[:created_at].strftime('%Y年%m月%d日 %H時%M分') %></span>
            <!-- コメント内容 -->
            <p class="text-sm text-gray-700 mt-1"><%= comment[:content] %></p>
          </div>
        </div>
      </div>
      <% end %>
      <% else %>
      <p class="text-sm text-gray-500">コメントはまだありません。</p>
      <% end %>
    </div>

    <!-- コメント入力欄 -->
    <div class="mb-6">
      <h3 class="text-lg font-semibold text-black mb-2">コメントを追加</h3>
      <div>
        <!-- フォームは実際には機能しません -->
        <form action="#" method="post" class="flex">
          <input type="text" name="comment" placeholder="コメントを入力" class="w-full bg-white border border-gray-300 mr-2 px-4 py-2 rounded">
          <button type="submit" class="btn bg-[#FFA500] text-black text-lg hover:bg-[#C28742] px-4 py-2 rounded shadow-lg">送信</button>
        </form>
        <p class="text-sm text-gray-500 mt-2">※ コメント機能は今後実装予定。</p>
      </div>
    </div>

    <!-- 戻るリンク -->
    <div class="text-center mt-6">
      <%= link_to '投稿一覧へ戻る', posts_path, class: "btn bg-[#FFA500] text-black text-lg hover:bg-[#C28742] px-4 py-2 rounded shadow-lg" %>
    </div>
  </div>
</div>